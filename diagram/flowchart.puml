@startuml

skinparam {
    BackgroundColor #FEFECE
    ArrowColor DeepPink
    BorderColor DeepPink
    NodeBackgroundColor #FEFECE
    NodeBorderColor DeepPink
}

start

:User accesses system;

if (Has account?) then (no)
    :Register new account;
endif

if (Want to login?) then (yes)
    :Login;
    if (Valid credentials?) then (yes)
        :Dashboard;
    else (no)
        :Show error message;
        stop
    endif
else (no)
    :View calculation history;
    stop
endif

while (Continue process?) is (yes)
    :Input entry data;
    note right
        - Ticket number
        - Vehicle number
        - Driver name
        - Owner name
        - Entry weight
        - Price per kg
    end note
    
    :Round entry weight to nearest 10;
    note right
        remainder = weight % 10
        if remainder >= 5
            weight + (10 - remainder)
        else
            weight - remainder
    end note
    
    :Save entry data;
    
    :Wait for exit weight;
    
    :Input exit weight;
    
    :Round exit weight to nearest 10;
    note right
        remainder = weight % 10
        if remainder >= 5
            weight + (10 - remainder)
        else
            weight - remainder
    end note
    
    :Calculate weight difference;
    note right
        rounded_entry - rounded_exit
    end note
    
    if (Weight difference >= 1000?) then (yes)
        :Round to nearest 100;
        note right
            floor(weight/100) * 100
        end note
    else if (Weight difference >= 100?) then (yes)
        :Round to nearest 10;
        note right
            floor(weight/10) * 10
        end note
    else (no)
        :Round to whole number;
        note right
            floor(weight)
        end note
    endif
    
    :Calculate total price;
    note right
        rounded_weight * price_per_kg
    end note
    
    :Save calculation;
    
    :Display results;
endwhile (no)

stop

@enduml
