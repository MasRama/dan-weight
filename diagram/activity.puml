@startuml

skinparam {
    ActivityBackgroundColor #FEFECE
    ActivityBorderColor DeepPink
    ActivityDiamondBackgroundColor #FEFECE
    ActivityDiamondBorderColor DeepPink
    ActivityStartColor DeepPink
    ActivityEndColor DeepPink
    ArrowColor DeepPink
}

|User|
start
:Access System;

|System|
:Show Landing Page;

|User|
if (Has Account?) then (Yes)
    :Enter Credentials;
    |System|
    if (Valid Credentials?) then (Yes)
        :Create Session;
        :Show Dashboard;
    else (No)
        :Show Error Message;
        stop
    endif
else (No)
    :Register New Account;
    |System|
    :Create User Account;
    :Show Dashboard;
endif

while (Process New Entry?) is (Yes)
    |User|
    partition "Weight Entry Process" {
        :Fill Entry Form;
        note right
            Required Data:
            * Ticket Number
            * Vehicle Number
            * Driver Name
            * Owner Name
            * Entry Weight
            * Price per KG
        end note
        
        |System|
        :Validate Entry Data;
        :Round Entry Weight to Nearest 10;
        :Save Entry Data;
        :Show Entry Success;
    }

    |User|
    partition "Weight Exit Process" {
        :Fill Exit Form;
        note right
            Required Data:
            * Exit Weight
        end note
        
        |System|
        :Round Exit Weight to Nearest 10;
        :Calculate Weight Difference;
        
        if (Weight Difference >= 1000) then (Yes)
            :Round to Nearest 100;
        else (No)
            if (Weight Difference >= 100) then (Yes)
                :Round to Nearest 10;
            else (No)
                :Round to Nearest Whole Number;
            endif
        endif
        
        :Calculate Total Price;
        :Save Exit Data;
    }

    |User|
    partition "History View Process" {
        :Request History;
        
        |System|
        :Fetch Calculations;
        :Display History Page;
        
        |User|
        :View Calculation Details;
    }
    
    |User|
    :Review Results;
endwhile (No)

stop

@enduml
